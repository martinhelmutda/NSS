{% extends "base.html" %}
{% load staticfiles %}

{% block body_block %}
    <div class="container">
      <h1 class="content">Crea tu proyecto</h1><br><br>
      <form method="POST" enctype="multipart/form-data"class="ui form">
      {% csrf_token %}
      {{ form_rol.management_form }}

      <!--<div class="fieldWrapper">
           {{ form_pro.pro_creation_date.errors }}
           {{ form_pro.pro_creation_date.label_tag }}
           {{ form_pro.pro_creation_date }}
       </div>-->

      <h3>Información del proyetco</h3>

      <div class="col-2">
        {{ form_pro.pro_name.errors }}
        {{ form_pro.pro_name.label_tag }}
        {{ form_pro.pro_name }}

        {{ form_pro.pro_video.errors }}
        {{ form_pro.pro_video.label_tag }}
        {{ form_pro.pro_video }}

        {{ form_pro.pro_phrase.errors }}
        {{ form_pro.pro_phrase.label_tag }}
        {{ form_pro.pro_phrase }}

        {{ form_pro.pro_category.errors }}
        {{ form_pro.pro_category.label_tag }}
        {{ form_pro.pro_category }}

        {{ form_pro.pro_description.errors }}
        {{ form_pro.pro_description.label_tag }}
        {{ form_pro.pro_description }}

        {{ form_pro.pro_about_us.errors }}
        {{ form_pro.pro_about_us.label_tag }}
        {{ form_pro.pro_about_us }}

        {{ form_pro.pro_creation_date.errors }}
        {{ form_pro.pro_creation_date.label_tag }}
        {{ form_pro.pro_creation_date }}

        {{ form_pro.pro_location.errors }}
        {{ form_pro.pro_location.label_tag }}
        {{ form_pro.pro_location }}



        <br>
        Selecciona todas las imagenes que quieras agregar:
        <input type="file" name="pro_img" id="id_pro_img" accept="image/*" multiple="">

      </div>
      <h3>Información de los roles</h3>
      <div class="table">
        {% for form in form_rol %}
        <ul>
          <li>{{ form.rol_dropdown_name.errors }}
              {{ form.rol_dropdown_name.label_tag }}
              {{ form.rol_dropdown_name }}
          </li>


            {{ form.rol_alternative_name.errors }}
                  {{ form.rol_alternative_name }}


          {{ form.rol_due_date.errors }}
              {{ form.rol_due_date.label_tag }}
              {{ form.rol_due_date }}

          {{ form.rol_amount.errors }}
              {{ form.rol_amount.label_tag }}
              {{ form.rol_amount }}

          {{ form.rol_description.errors }}
              {{ form.rol_description.label_tag }}
              {{ form.rol_description }}

          {{ form.rol_location.errors }}
              {{ form.rol_location.label_tag }}
              {{ form.rol_location }}

        </ul>
      {% endfor %}
      </div>
      <input type="hidden" name="cantidad" id="cantidad"value="">

        <input type="button" value="Add More" id="add_more">
        <input type="submit" class="positive ui button" value="Submit">
      <!--  <div class="fieldWrapper">
            {{ form.ProName.errors }}
            {{ form.ProName.label_tag }}
            {{ form.ProName }}
        </div>-->
        <!--<button class="ui black button">Agregar Rol</button><br><br>-->

      </form>
    </div>
{% endblock %}
{% block js_block %}
<!-- Other js go here -->
    <script type="text/javascript">
    var opcion = document.getElementById("id_form-0-rol_dropdown_name").value;
    if (opcion=='Otro') {
      document.getElementById("rol_alternative_name").hidden = false;
    }else{
        document.getElementById("rol_alternative_name").hidden = true;
    }
    $('div select[name=form-0-rol_dropdown_name]').change(function(e){
      if ($('div select[name=form-0-rol_dropdown_name]').val() == 'Otro'){
        $('#rol_alternative_name').show();
      }else{
        $('#rol_alternative_name').hide();
      }
    });

        var dateToday = new Date();
      $(function() {
        $('input[id="id_pro_creation_date"]').daterangepicker({
          singleDatePicker: true,
          showDropdowns: true,
          maxDate: dateToday,
          locale: {
             format: 'YYYY-MM-DD'
            }
        });
        $('input[class="datepicker"]').daterangepicker({
          singleDatePicker: true,
          showDropdowns: true,
          minDate: dateToday,
          locale: {
             format: 'YYYY-MM-DD'
            }
        });

        console.log("HOLAA")
      });

    </script>
    <script type='text/javascript'>
            co=1;
              $('#add_more').click(function() {
                console.log("HOLA")
            cloneMore('div.table:last', 'service');
          });
          function cloneMore(selector, type) {
              var newElement = $(selector).clone(true);
              var total = $('#id_' + type + '-TOTAL_FORMS').val();
              console.log("total "+total)
              newElement.find(':input').each(function() {
                  var name = $(this).attr('name').replace('-' + (co-1) + '-','-' + co+ '-');
                  var id = 'id_' + name;
                  console.log("id "+id)
                  $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked');
              });
              newElement.find('label').each(function() {
                  var newFor = $(this).attr('for').replace('-' + (co-1) + '-','-' + co + '-');
                  $(this).attr('for', newFor);
              });
              total=total+1;
              co=co+1;
              console.log("total "+total)
              console.log("co "+co)
              $('#id_' + type + '-TOTAL_FORMS').val(co);
              $(selector).after(newElement);
              $('input[class="datepicker"]').daterangepicker({
                singleDatePicker: true,
                showDropdowns: true,
                locale: {
                   format: 'YYYY-MM-DD'
                  }
              });
              document.getElementById("cantidad").value = co;
              console.log("cant " +   document.getElementById("cantidad").value);
          }
        </script>


{% endblock %}
